<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NNT1R8YF3Z"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NNT1R8YF3Z');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œí¬ë¼í…ŒìŠ¤ì‹ ëŒ€í™” - LLM Classroom Proto4</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/shared.css?v=1">
    <link rel="stylesheet" href="/static/css/button-system.css?v=1">
    <link rel="stylesheet" href="/static/css/input-components.css?v=1">
    <link rel="stylesheet" href="/static/css/chat.css?v=2">
</head>
<body>
    <div class="apple-container">
        <!-- Global Navigation Bar -->
        <nav class="gnb">
            <div class="gnb-container">
                <div class="gnb-logo">
                    <img src="/static/codle-logo.svg" alt="Codle" class="logo-image" />
                    <div class="logo-divider"></div>
                    <img src="/static/socrates-logo.svg" alt="ì†Œí¬ë¼í…ŒìŠ¤ ì•„ì¹´ë°ë¯¸" class="socrates-logo" />
                </div>
            </div>
        </nav>

    <div class="chat-container">
        <header class="chat-header">
            <div class="topic-info">
                <h1>ğŸ›ï¸ <span id="topicTitle">í•™ìŠµ ì£¼ì œ</span></h1>
                <button id="backBtn" class="btn btn-ghost btn-sm" data-ga-event="track">
                    <span class="btn-icon btn-icon-left">â†</span>
                    ì£¼ì œ ë³€ê²½
                </button>
            </div>
        </header>
        
        <main class="chat-main">
            <div class="chat-section">
                <div class="messages-container" id="messagesContainer">
                    <div id="loadingMessage" class="loading-message">
                        <div class="loading-spinner"></div>
                        <p>AI íŠœí„°ê°€ ì²« ì§ˆë¬¸ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                    </div>
                </div>
                
                <!-- ë°ìŠ¤í¬í†±ìš© ì…ë ¥ì°½ -->
                <div class="input-section">
                    <form id="chatForm" class="chat-form">
                        <div class="input-group">
                            <textarea 
                                id="messageInput"
                                placeholder="ìƒê°ì„ ììœ ë¡­ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”..."
                                rows="3"
                                disabled
                            ></textarea>
                            <button type="submit" id="sendBtn" class="btn btn-primary btn-md" disabled data-ga-event="track">
                                <span class="btn-icon btn-icon-left">ğŸ“¤</span>
                                ì „ì†¡
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- ëª¨ë°”ì¼ìš© ë…ë¦½ ì…ë ¥ì°½ -->
            <div class="input-section-mobile" id="inputSectionMobile">
                <form id="chatFormMobile" class="chat-form">
                    <textarea 
                        id="messageInputMobile"
                        placeholder="ìƒê°ì„ ììœ ë¡­ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”..."
                        rows="2"
                        disabled
                    ></textarea>
                    <button type="submit" id="sendBtnMobile" class="btn btn-primary btn-md" disabled data-ga-event="track">
                        <span class="btn-icon">ğŸ“¤</span>
                    </button>
                </form>
            </div>
            
            <!-- í•¸ë“¤ì„ ìœ„í•œ ê³ ì • ë°°ê²½ ì˜ì—­ -->
            <div class="drawer-handle-fixed-area"></div>
            
            <!-- í•˜ë‹¨ ë“œë¡œì–´ë¡œ ë³€ê²½ëœ ì§„í–‰ë¥  ì„¹ì…˜ -->
            <div class="progress-section" id="scoreDrawer">
                <div class="drawer-handle-area" id="drawerHandleArea">
                    <div class="drawer-handle"></div>
                    <div class="drawer-handle-text">ğŸ“Š ì ìˆ˜ ë³´ê¸°</div>
                </div>
                
                <div class="drawer-content">
                    <div class="understanding-gauge">
                        <div class="gauge-container">
                            <div class="gauge-background">
                                <div class="gauge-fill" id="gaugeFill" style="width: 0%"></div>
                            </div>
                            <div class="gauge-text">
                                <span id="scoreText">0</span>%
                            </div>
                        </div>
                        <div class="progress-feedback" id="progressFeedback">
                            í•™ìŠµì„ ì‹œì‘í•´ë³´ì„¸ìš”!
                        </div>
                    </div>
                    
                    <div class="completion-celebration" id="completionCelebration" style="display: none;">
                        <div class="celebration-content">
                            <h2>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
                            <p>ì™„ë²½í•œ ì´í•´ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤!</p>
                            <div class="celebration-animation">ğŸŒŸâœ¨ğŸŠ</div>
                            <p class="continue-text">ê³„ì†í•´ì„œ ë” ê¹Šì´ íƒêµ¬í•´ë³´ì„¸ìš”!</p>
                        </div>
                    </div>
                    
                    <div class="learning-tips">
                        <h4>ğŸ’¡ ì†Œí¬ë¼í…ŒìŠ¤ì‹ ëŒ€í™” íŒ</h4>
                        <ul>
                            <li>ì˜ê²¬ê³¼ ê·¸ ê·¼ê±°ë¥¼ í•¨ê»˜ ë§í•´ë³´ì„¸ìš”</li>
                            <li>ë§‰íˆë©´ "ëª¨ë¥´ê² ì–´ìš”"ë¼ê³  ì†”ì§íˆ ë§í•´ë³´ì„¸ìš”</li>
                            <li>AIì˜ ì§ˆë¬¸ì— ì§ˆë¬¸ìœ¼ë¡œ ë‹µí•´ë„ ì¢‹ì•„ìš”</li>
                            <li>í‹€ë ¤ë„ ê´œì°®ì•„ìš”, íƒêµ¬ ê³¼ì •ì´ ì¤‘ìš”í•©ë‹ˆë‹¤</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    </div>

    <script src="/static/config.js"></script>
    <script src="/static/js/chat.js"></script>
    <script>
        // Google Analytics event tracking
        document.addEventListener('DOMContentLoaded', () => {
            const trackableElements = document.querySelectorAll('[data-ga-event]');
            trackableElements.forEach(element => {
                element.addEventListener('click', function(e) {
                    if (typeof gtag !== 'undefined') {
                        // Generate event label from element properties
                        const classList = Array.from(this.classList).join(' ');
                        const id = this.id || '';
                        const text = this.textContent?.trim().substring(0, 50) || '';
                        const tag = this.tagName.toLowerCase();

                        // Create descriptive label
                        let label = `${tag}`;
                        if (id) label += ` #${id}`;
                        if (classList) label += ` .${classList.split(' ')[0]}`;
                        if (text) label += ` - ${text}`;

                        gtag('event', 'click', {
                            'event_category': 'engagement',
                            'event_label': label,
                            'element_classes': classList,
                            'element_id': id,
                            'element_text': text
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>
